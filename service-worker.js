"use strict";async function broadcastMessage(e){const n=await self.clients.matchAll({includeUncontrolled:!0});for(const s of n)s.postMessage(e)}async function clearPackageCaches(){try{await caches.delete(LITE_CACHE),await caches.delete(FULL_CACHE),console.log("[SW] Cleared package caches")}catch(e){console.warn("[SW] Failed clearing package caches:",e)}}async function downloadPackage(e="lite",n={}){async function s(e){try{const n=await fetch(e,{method:"HEAD"}),s=n.headers.get("content-length");return s?parseInt(s,10):null}catch(e){return null}}const a="full"===e?"full":"lite",o="full"===e?FULL_CACHE:LITE_CACHE,i="full"===e?Array.from(new Set([...CORE_ASSETS,...FULL_PACKAGE_ADDITIONAL])):Array.from(new Set([...CORE_ASSETS]));if(broadcastMessage({type:"download-start",package:a,totalFiles:i.length}),n.quota&&n.usage){const s=n.quota-n.usage,o=31457280,i=104857600;if("lite"===e&&s<o){const e="Insufficient free storage for lite package (approximate check).";throw broadcastMessage({type:"download-error",package:a,error:e}),new Error(e)}if("full"===e&&s<i){const e="Insufficient free storage for full package (approximate check).";throw broadcastMessage({type:"download-error",package:a,error:e}),new Error(e)}}const t=await caches.open(o);let c=0,r=0,g=0;const l=i.length,u=await Promise.all(i.map(e=>s(e).catch(()=>null)));u.forEach(e=>{"number"==typeof e&&(c+=e)}),0===c&&(c=null);for(let e=0;e<i.length;e++){const n=i[e];try{const e=await t.match(n);if(e){try{const e=await fetch(n,{method:"HEAD"}),s=e.headers.get("content-length"),a=s?parseInt(s,10):0;r+=a}catch(e){}g++,broadcastMessage({type:"download-progress",package:a,filesCached:g,totalFiles:l,cachedBytes:r,totalBytes:c});continue}const s=await fetch(n);if(!s||!s.ok){console.warn(`[SW] Failed to fetch ${n} (status: ${s&&s.status})`),broadcastMessage({type:"download-progress",package:a,filesCached:g,totalFiles:l,cachedBytes:r,totalBytes:c,lastFailed:n});continue}const o=s.clone();let i=0;try{const e=await o.blob();i=e.size||0,r+=i;const a=new Response(e,{headers:s.headers});await t.put(n,a.clone())}catch(e){await t.put(n,s.clone())}g++,broadcastMessage({type:"download-progress",package:a,filesCached:g,totalFiles:l,cachedBytes:r,totalBytes:c})}catch(e){console.error("[SW] Error caching",n,e),broadcastMessage({type:"download-progress",package:a,filesCached:g,totalFiles:l,cachedBytes:r,totalBytes:c,lastFailed:n,error:e.message||String(e)})}}return broadcastMessage({type:"download-complete",package:a,filesCached:g,totalFiles:l,cachedBytes:r,totalBytes:c}),{filesCached:g,totalFiles:l,cachedBytes:r,totalBytes:c}}const CACHE_PREFIX="lc-cache",CACHE_VERSION="2026-01-28-v1",CORE_CACHE=`${CACHE_PREFIX}-core-${CACHE_VERSION}`,LITE_CACHE=`${CACHE_PREFIX}-package-lite-${CACHE_VERSION}`,FULL_CACHE=`${CACHE_PREFIX}-package-full-${CACHE_VERSION}`,CORE_ASSETS=["/","/LearningClub-Key-of-Success-Learning-Point/index.htm","/LearningClub-Key-of-Success-Learning-Point/Error/404.htm","/LearningClub-Key-of-Success-Learning-Point/Error/blocked.htm","/LearningClub-Key-of-Success-Learning-Point/Error/empty.htm","/LearningClub-Key-of-Success-Learning-Point/Error/no-internet.htm","/LearningClub-Key-of-Success-Learning-Point/Error/timeout.htm","/LearningClub-Key-of-Success-Learning-Point/Error/cors.htm","/LearningClub-Key-of-Success-Learning-Point/Error/csp.htm","/LearningClub-Key-of-Success-Learning-Point/Error/dns.htm","/LearningClub-Key-of-Success-Learning-Point/Error/iframe.htm","/LearningClub-Key-of-Success-Learning-Point/Error/maintenance.htm","/LearningClub-Key-of-Success-Learning-Point/Error/permission.htm","/LearningClub-Key-of-Success-Learning-Point/Error/server.htm","/LearningClub-Key-of-Success-Learning-Point/service-worker.js","/LearningClub-Key-of-Success-Learning-Point/manifest.json","/LearningClub-Key-of-Success-Learning-Point/lock_iframe_view.js","/LearningClub-Key-of-Success-Learning-Point/No_print.htm","/LearningClub-Key-of-Success-Learning-Point/pwa.js","/LearningClub-Key-of-Success-Learning-Point/script.js","/LearningClub-Key-of-Success-Learning-Point/style.css","/LearningClub-Key-of-Success-Learning-Point/projects.js","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css","https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js","https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js","https://github.com/akshat-881236/LearningClub-Key-of-Success-Learning-Point/tree/main/PdfLibrary","https://akshat-881236.github.io/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView","https://akshat-881236.github.io/Quizzone/","https://akshat-881236.github.io/Quizzone/Home/QuizzoneAI.htm","https://akshat-881236.github.io/LocalRepo/","https://akshat-881236.github.io/SitemapGeneratorXml/","https://akshat-881236.github.io/DPGStudent-881238/","https://akshat-881236.github.io/DPGStudent-881238/Assignment_Frontpage_DPG_STM_Akshat_Network_Hub.htm","https://akshat-881236.github.io/DPGStudent-881238/Practical_DPG_STM_Akshat_Network_Hub.htm","https://akshat-881236.github.io/sitemapjs/","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/Icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-48.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-72.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-96.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-128.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-192.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-256.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-384.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-512.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-8.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-16.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-32.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-64.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-144.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-164.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-220.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Icons/icon-320.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/Logo.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-384.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-512.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-16.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-32.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-48.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-96.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-128.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-192.png","/LearningClub-Key-of-Success-Learning-Point/Assets/Logoes/icon-256.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/SearchEngineImage.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/SEOLogo.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Ask.com/Ask_icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Ask.com/Dogpile_logo.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Bing/Bing_icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Bing/Bing_logo.svg","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Google/Google_icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Google/Google_logo.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Yahoo/Yahoo_icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Yahoo/Yahoo_logo.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Yandex/Yandex_icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Yandex/Yandex_logo.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/DuckDuckGo/DuckDuckGo_icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/DuckDuckGo/DuckDuckGo_logo.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Baidu/Baidu_icon.png","/LearningClub-Key-of-Success-Learning-Point/Assets/SearchEngineLogoes/Baidu/Baidu_logo.png","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/"],FULL_PACKAGE_ADDITIONAL=["/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/10thDMC.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/12thDMC.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/BCASEM-1DMC.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/Akshat_Prasad_Certificate.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/HtmlBolierPlate(For All Akshat Project).pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/Terms%20of%20Use%20_%20Akshat%20Network%20Hub.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/Privacy%20Compliance%20Report%20â€“%20Akshat%20Network%20Hub%20Ecosystem.pdf","https://akshat-881236.github.io/Quizzone/Documentary/Quizzone_Owner_Message.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/PhysiographicDivisionOfIndia.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/Physical%20Education%20Practical%20File%20Demo.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/Quizzone%20Homepage%20-%20Akshat%20Network%20Hub%20Source%20Code.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/SEOChapter-1.pdf","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/AkshatHtmlBoilerPlate.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/ANHTermofUse.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/PrivacyComplianceReport.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/QuizzoneManual.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/PhysiographicDivisionOfIndia.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/PhysicalEducationSem-2PracticalFile.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/QuizzoneHomepageSourceCode.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/10thDMC.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/12thDMC.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfHtmlView/BCASEM-1DMC.htm","/LearningClub-Key-of-Success-Learning-Point/PdfLibrary/PdfFiles/SEOChapter-1.htm"];self.addEventListener("install",e=>{self.skipWaiting(),e.waitUntil((async()=>{const e=await caches.open(CORE_CACHE);try{await e.addAll(CORE_ASSETS),console.log("[SW] Core assets cached")}catch(e){console.warn("[SW] Some core assets failed to cache during install:",e)}})())}),self.addEventListener("activate",e=>{e.waitUntil((async()=>{const e=await caches.keys(),n=[CORE_CACHE,LITE_CACHE,FULL_CACHE];for(const s of e)!n.includes(s)&&s.startsWith(CACHE_PREFIX)&&(await caches.delete(s),console.log("[SW] Deleted old cache:",s));await self.clients.claim()})())}),self.addEventListener("fetch",e=>{const n=e.request,s=new URL(n.url);s.origin,self.location.origin;CORE_ASSETS.includes(s.pathname)||CORE_ASSETS.includes(n.url)?e.respondWith(caches.open(CORE_CACHE).then(async e=>{const s=await e.match(n);if(s)return s;try{const s=await fetch(n);return s&&s.ok&&await e.put(n,s.clone()),s}catch(n){return await e.match("/LearningClub-Key-of-Success-Learning-Point/Error/no-internet.htm")}})):"navigate"===n.mode||n.headers&&n.headers.get("accept")&&n.headers.get("accept").includes("text/html")?e.respondWith((async()=>{try{const e=await fetch(n),s=await caches.open(CORE_CACHE);return s.put(n,e.clone()).catch(()=>{}),e}catch(e){const n=await caches.open(CORE_CACHE);return n.match("/LearningClub-Key-of-Success-Learning-Point/index.htm")||n.match("/LearningClub-Key-of-Success-Learning-Point/Error/no-internet.htm")||new Response("Offline",{status:503,statusText:"Offline"})}})()):e.respondWith((async()=>{try{const e=await fetch(n);return e}catch(e){const s=await caches.match(n);return s||("image"===n.destination?fetch("/Assets/Icons/icon-32.png").catch(()=>new Response("",{status:404})):new Response("Offline",{status:503,statusText:"Offline"}))}})())}),self.addEventListener("message",e=>{const n=e.data||{};if(n&&n.type)switch(n.type){case"download-package":{const e=(n.package||"lite").toLowerCase(),s=n.estimate||{};downloadPackage(e,s).catch(n=>{console.error("[SW] download-package failed:",n),broadcastMessage({type:"download-error",package:e,error:n.message||String(n)})})}break;case"clear-package-caches":clearPackageCaches().then(()=>{broadcastMessage({type:"cache-cleared"})})}});