document.addEventListener("DOMContentLoaded",()=>{async function e(e=projects){n.innerHTML="";const o=e.slice(0,s);for(const e of o){const o=document.createElement("div");o.className="card";const a=`img-${e.title.replace(/\s+/g,"-")}`;o.innerHTML=`\n          <img id="${a}" alt="${e.title}">\n          <div class="card-content">\n            <h3>${e.title}</h3>\n            <p>${e.desc}</p>\n            <div class="tags">#${e.tags.join(" #")}</div>\n            <p><a href="${e.link}" target="_blank">Open PDF â†’</a></p>\n          </div>`,n.appendChild(o);const s=`thumb-${e.pdf}`,c=localStorage.getItem(s),d=document.getElementById(a);if(c)d.src=c,d.style.opacity="1";else try{const n=await t.getDocument(e.pdf).promise,o=await n.getPage(1),a=o.getViewport({scale:1.5}),c=document.createElement("canvas"),i=c.getContext("2d");c.height=a.height/2,c.width=a.width,await o.render({canvasContext:i,viewport:a}).promise;const l=document.createElement("canvas");l.width=c.width,l.height=c.height/2;const r=l.getContext("2d");r.drawImage(c,0,0,c.width,c.height/2,0,0,l.width,l.height);const g=l.toDataURL("image/png");d.src=g,d.style.opacity="1",localStorage.setItem(s,g)}catch{d.src="Assets/Icons/Icon.png",d.style.opacity="1"}}a.style.display=e.length>s?"block":"none"}const t=window["pdfjs-dist/build/pdf"];t.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js",projects.sort((e,t)=>new Date(t.date)-new Date(e.date));const n=document.getElementById("projectGrid"),o=document.getElementById("searchInput"),a=document.getElementById("viewMoreBtn");let s=12;o.addEventListener("input",t=>{const n=t.target.value.toLowerCase(),o=projects.filter(e=>e.title.toLowerCase().includes(n)||e.desc.toLowerCase().includes(n)||e.tags.join(" ").toLowerCase().includes(n)||e.link.toLowerCase().includes(n)||e.pdf.toLowerCase().includes(n));s=12,e(o)}),a.addEventListener("click",()=>{s+=12,e()}),e(),document.getElementById("year").textContent=(new Date).getFullYear(),document.querySelector(".nav-toggle").addEventListener("click",()=>document.getElementById("anhMainNav").classList.toggle("open"))});